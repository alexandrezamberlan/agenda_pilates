{% extends 'apppaciente/base.html' %}
{% load bootstrap3 %}

{% block title %}
	{% bootstrap_icon 'record' %} Meus Treinos
{% endblock %}

{% block content %}
	<div class="panel panel-default">
		<div class="panel-body">
		<form class="form">
			<div class="row">
				<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
					{% bootstrap_field form.pesquisa  %}
				</div>	
				<div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
					<br>
					<button type="submit" class="btn btn-success btn-md"  style="width: 100%;">{% bootstrap_icon 'search' %} Buscar</button>
				</div>						
			</div>
		</form>
		</div>
	</div>

	<div class="table-responsive">
		<table class="table table-hover">
			<thead>
				<th>Descrição</th>
				<th class="text-center">Executar</th>
				<th>Exercícios</th>
				<th>Período</th>
				<th>Pausas</th>
			</thead>

			<tbody>
				{% for treino in object_list %}
					<tr>
						<td>
							{{ treino.descricao }}<br>
							<small>
								{{ treino.fisioterapeuta.nome }}<br>
							</small>
						</td>										
						</td>
						<td class="text-center">
							{% if treino.is_active and treino.exercicios.count > 0 %}
								{% if treino.meta_treino_atingida %}
									<a href="{% url 'treino_executar' treino.slug %}" class="btn btn-warning btn-sm" title="Executar Treino com Animação">
										<span class="glyphicon glyphicon-play"></span>
									</a>
									<br>
									<span class="label label-success"> META ATINGIDA </span>
								{% else %}
									<a href="{% url 'treino_executar' treino.slug %}" class="btn btn-success btn-sm" title="Executar Treino com Animação">
										<span class="glyphicon glyphicon-play"></span>
									</a>
								{% endif %}
							{% else %}
								<button class="btn btn-success btn-sm disabled" title="Treino inativo ou sem exercícios">
									<span class="glyphicon glyphicon-play"></span>
								</button>
							{% endif %}
						</td>				
						<td>
							{% for exercicio in treino.exercicios.all %}
								{% if exercicio.video %}
									<a href="{{ exercicio.video }}" target="_blank">{% bootstrap_icon 'film' %}</a>					
								{% endif %}								
								{{ exercicio }} 
								<br>
							{% endfor %}
							{% if treino.qtd_desse_treino_realizado > 0 %}
								<label class="badge border border-primary text-primary bg-light">Treino executado {{ treino.qtd_desse_treino_realizado }} vez(es)</label><br>
							{% else %}
								<b>Não iniciado</b>
							{% endif %}
						</td>
						<td>
							<b>Início: </b>
							{% if treino.data_inicio %}
								{{ treino.data_inicio|date:"d/m/Y" }}
							{% else %}
								Não definido
							{% endif %}
							<br>
							<b>Fim: </b>
							{% if treino.data_fim %}
								{{ treino.data_fim|date:"d/m/Y" }}
							{% else %}
								Não definido
							{% endif %}
							<br>
							<b>Treino deve ser realizado: </b> {{ treino.quantidade_vezes_periodo }} vez(es)
						</td>
						<td>
							{% if treino.pausas > 0 %}
								{{ treino.pausas }} seg.
							{% else %}
								Sem pausas
							{% endif %}
						</td>
						<td class="text-center">
							
						</td>
					</tr>
				{% endfor %}
			</tbody>
			<tfoot>
				<th colspan="8">
					Total de registros: {{ object_list|length }}
				</th>
			</tfoot>
		</table>
	</div>
{% endblock %}